<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Product;

class ProductSeasonalitySeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Βρίσκουμε όλα τα προϊόντα
        $products = Product::all();
        
        if ($products->isEmpty()) {
            $this->command->info('Δεν υπάρχουν προϊόντα για να προσθέσουμε εποχικότητα. Παρακαλώ εκτελέστε πρώτα το ProductSeeder.');
            return;
        }
        
        // Μήνες σε Ελληνικά
        $months = [
            'Ιανουάριος', 'Φεβρουάριος', 'Μάρτιος', 'Απρίλιος', 'Μάιος', 'Ιούνιος',
            'Ιούλιος', 'Αύγουστος', 'Σεπτέμβριος', 'Οκτώβριος', 'Νοέμβριος', 'Δεκέμβριος'
        ];
        
        // Διαφορετικά μοτίβα εποχικότητας
        $seasonalityPatterns = [
            // Καλοκαιρινά προϊόντα (π.χ. ντομάτες, αγγούρια)
            'summer' => [
                'Ιανουάριος' => 'none', 'Φεβρουάριος' => 'none', 'Μάρτιος' => 'low',
                'Απρίλιος' => 'medium', 'Μάιος' => 'high', 'Ιούνιος' => 'high',
                'Ιούλιος' => 'high', 'Αύγουστος' => 'high', 'Σεπτέμβριος' => 'medium',
                'Οκτώβριος' => 'low', 'Νοέμβριος' => 'none', 'Δεκέμβριος' => 'none'
            ],
            
            // Χειμωνιάτικα προϊόντα (π.χ. λάχανο, πράσα)
            'winter' => [
                'Ιανουάριος' => 'high', 'Φεβρουάριος' => 'high', 'Μάρτιος' => 'medium',
                'Απρίλιος' => 'low', 'Μάιος' => 'none', 'Ιούνιος' => 'none',
                'Ιούλιος' => 'none', 'Αύγουστος' => 'none', 'Σεπτέμβριος' => 'low',
                'Οκτώβριος' => 'medium', 'Νοέμβριος' => 'high', 'Δεκέμβριος' => 'high'
            ],
            
            // Φθινοπωρινά προϊόντα (π.χ. μήλα, αχλάδια)
            'autumn' => [
                'Ιανουάριος' => 'low', 'Φεβρουάριος' => 'none', 'Μάρτιος' => 'none',
                'Απρίλιος' => 'none', 'Μάιος' => 'none', 'Ιούνιος' => 'low',
                'Ιούλιος' => 'medium', 'Αύγουστος' => 'high', 'Σεπτέμβριος' => 'high',
                'Οκτώβριος' => 'high', 'Νοέμβριος' => 'medium', 'Δεκέμβριος' => 'low'
            ],
            
            // Ανοιξιάτικα προϊόντα (π.χ. φράουλες, σπαράγγια)
            'spring' => [
                'Ιανουάριος' => 'none', 'Φεβρουάριος' => 'low', 'Μάρτιος' => 'medium',
                'Απρίλιος' => 'high', 'Μάιος' => 'high', 'Ιούνιος' => 'medium',
                'Ιούλιος' => 'low', 'Αύγουστος' => 'none', 'Σεπτέμβριος' => 'none',
                'Οκτώβριος' => 'none', 'Νοέμβριος' => 'none', 'Δεκέμβριος' => 'none'
            ],
            
            // Όλο το χρόνο (π.χ. προϊόντα θερμοκηπίου)
            'all_year' => [
                'Ιανουάριος' => 'medium', 'Φεβρουάριος' => 'medium', 'Μάρτιος' => 'medium',
                'Απρίλιος' => 'medium', 'Μάιος' => 'medium', 'Ιούνιος' => 'medium',
                'Ιούλιος' => 'medium', 'Αύγουστος' => 'medium', 'Σεπτέμβριος' => 'medium',
                'Οκτώβριος' => 'medium', 'Νοέμβριος' => 'medium', 'Δεκέμβριος' => 'medium'
            ]
        ];
        
        // Πιθανά μοτίβα για τυχαία επιλογή
        $patternKeys = array_keys($seasonalityPatterns);
        
        foreach ($products as $product) {
            $this->command->info("Προσθήκη εποχικότητας για το προϊόν: {$product->name}");
            
            // Επιλέγουμε ένα τυχαίο μοτίβο εποχικότητας
            $pattern = $seasonalityPatterns[$patternKeys[array_rand($patternKeys)]];
            
            // Αποθηκεύουμε την εποχικότητα
            $product->seasonality = $pattern;
            $product->save();
        }
        
        $this->command->info('Η εποχικότητα των προϊόντων προστέθηκε με επιτυχία!');
    }
}